this.Traitify=new function(){return this.host="https://api.traitify.com",this.version="v1",this.testMode=!1,this.setTestMode=function(e){return this.testMode=e,this},this.setHost=function(e){return e=e.replace("http://","").replace("https://",""),e="https://"+e,this.host=e,this},this.setPublicKey=function(e){return this.publicKey=e,this},this.setVersion=function(e){return this.version=e,this},this.ajax=function(e,t,n,i){var s;return e=""+this.host+"/"+this.version+e,s=new XMLHttpRequest,"withCredentials"in s?s.open(t,e,!0):"undefined"!=typeof XDomainRequest?(s=new XDomainRequest,s.open(t,e)):(console.log("There was an error making the request."),s=null),s.open(t,e,!0),s.setRequestHeader("Authorization","Basic "+btoa(this.publicKey+":x")),s.setRequestHeader("Content-type","application/json"),s.setRequestHeader("Accept","application/json"),s.onload=function(){var e;return e=JSON.parse(s.response),n(e),!1},s.send(i),this},this.put=function(e,t,n){return this.ajax(e,"PUT",n,t),this},this.get=function(e,t){return this.ajax(e,"GET",t,""),this},this.getDecks=function(e){return this.get("/decks",function(t){return e(t)}),this},this.getSlides=function(e,t){return this.get("/assessments/"+e+"/slides",function(e){return t(e)}),this},this.addSlide=function(e,t,n,i,s){return this.put("/assessments/"+e+"/slides/"+t,JSON.stringify({response:n,time_taken:i}),function(e){return s(e)}),this},this.addSlides=function(e,t,n){return this.put("/assessments/"+e+"/slides",JSON.stringify(t),function(e){return n(e)}),this},this.getPersonalityTypes=function(e,t){return this.get("/assessments/"+e+"/personality_types",function(e){return t(e)}),this},this.getPersonalityTraits=function(e,t){return this.get("/assessments/"+e+"/personality_traits",function(e){return t(e)}),this},this.getPersonalityTypesTraits=function(e,t,n){return this.get("/assessments/"+e+"/personality_types/"+t+"/personality_traits",function(e){return n(e)}),this},this.ui=Object(),this},Traitify.ui.slideDeck=function(e,t,n){var i,s,a;return i=Object(),i.nodes=Object(),i.states=Object(),i.states.animating=!1,i.data=Object(),i.data.slideResponses=Object(),i.states.finished=!1,"undefined"==typeof n&&(n=Object()),navigator.userAgent.match(/iPad/i)&&(i.device="ipad"),navigator.userAgent.match(/iPhone/i)&&(i.device="iphone"),navigator.userAgent.match(/Android/i)&&(i.device="android"),navigator.userAgent.match(/BlackBerry/i)&&(i.device="blackberry"),navigator.userAgent.match(/webOS/i)&&(i.device="webos"),"string"!=typeof t?(i.nodes.main=document.createElement("div"),document.getElementsByTagName("body")[0].appendChild(i.nodes.main)):-1!==t.indexOf("#")?(t=t.replace("#",""),i.nodes.main=document.getElementById(t)):(t=t.replace(".",""),s=document.getElementsByClassName(t),i.nodes.main=s?s[0]:null),i.nodes.main?(i.data.slidesLeft=function(){return i.data.slides.length-i.data.currentSlide},i.data.slideValues=Array(),i.data.addSlide=function(s,a){return i.data.lastSlideTime=i.data.currentSlideTime,i.data.currentSlideTime=(new Date).getTime(),i.data.slideValues.push({id:s,response:a,time_taken:i.data.currentSlideTime-i.data.lastSlideTime}),i.data.sentSlides+=1,i.data.slideValues.length%10===0||i.data.sentSlides===i.data.slidesToPlayLength?Traitify.addSlides(e,i.data.slideValues,function(){return i.callbacks.addSlide&&i.callbacks.addSlide(i),i.data.sentSlides===i.data.slidesToPlayLength&&(i.nodes.main.innerHTML="",n.showResults!==!1&&Traitify.ui.resultsDefault(e,t,n),i.callbacks.finished)?i.callbacks.finished(i):void 0}):void 0},i.partials=Object(),i.partials.make=function(e,t){var n,i;i=document.createElement(e);for(n in t)i.setAttribute(n,t[n]);return i},i.partials.div=function(e){return this.make("div",e)},i.partials.img=function(e){return this.make("img",e)},i.partials.i=function(e){return this.make("i",e)},i.data.getProgressBarNumbers=function(e){var t,n,s,a;return s=i.data.totalSlideLength,t=i.data.slides.length,n=i.data.sentSlides,"initializing"!==e&&(n+=1),a=s-t+n,a/i.data.totalSlideLength*100},i.partials.slideDeckContainer=function(){var e,t,n;return t=this.div({"class":"tf-slide-deck-container"}),e=this.div({"class":"cover"}),e.innerHTML="Landscape mode is not currently supported",t.appendChild(e),n=i.data.getProgressBarNumbers("initializing"),t.appendChild(i.partials.progressBar(n)),t.appendChild(this.slides(i.data.slides)),t.appendChild(this.meNotMe()),t},i.partials.meNotMe=function(){var e;return e=this.div({"class":"me-not-me-container"}),i.nodes.me=this.div({"class":"me"}),i.nodes.notMe=this.div({"class":"not-me"}),i.nodes.notMe.innerHTML="Not Me",i.nodes.me.innerHTML="Me",e.appendChild(i.nodes.me),e.appendChild(i.nodes.notMe),i.nodes.meNotMeContainer=e,e},i.partials.slides=function(e){var t,n;return n=this.div({"class":"slides"}),t=i.partials.slide(e[0]),t.className+=" placeholder",n.appendChild(t),i.nodes.currentSlide=i.partials.slide(e[0]),i.nodes.currentSlide.className+=" active",n.appendChild(i.nodes.currentSlide),e[1]?(i.nodes.nextSlide=i.partials.slide(e[1]),n.appendChild(i.nodes.nextSlide)):i.nodes.nextSlide=!1,i.nodes.slides=n,n},i.partials.slide=function(e){var t,n,s;return t=this.div({"class":"slide"}),n=this.div({"class":"caption"}),n.innerHTML=e.caption,i.device?(s=this.div({style:"background-image:url('"+e.image_desktop_retina+"'); background-position:"+e.focus_x+"% "+e.focus_y+"%;'","class":"image"}),s.appendChild(n)):(s=this.img({src:e.image_desktop_retina}),t.appendChild(n)),t.appendChild(s),t},i.partials.progressBar=function(e){var t,n;return t=this.div({"class":"progress-bar"}),n=this.div({"class":"progress-bar-inner"}),n.style.width=e+"%",t.appendChild(n),i.nodes.progressBar=t,i.nodes.progressBarInner=n,t},i.partials.loadingAnimation=function(){var e,t,n,i;return t=this.div({"class":"loading"}),e=this.i(Object()),i=this.i(Object()),n=this.div({"class":"symbol"}),n.appendChild(e),n.appendChild(i),t.appendChild(n),t},i.helpers=Object(),a=Object(),i.helpers.touch=function(e,t){return e.addEventListener("touchstart",function(e){var t;return t=e.changedTouches[0],a.startx=parseInt(t.clientX),a.starty=parseInt(t.clientY)}),e.addEventListener("touchend",function(e){var n,i,s;return s=e.changedTouches[0],n=Math.abs(a.startx-parseInt(s.clientX)),i=Math.abs(a.starty-parseInt(s.clientY)),2>n&&2>n?t():void 0})},i.helpers.onload=function(e){return window.addEventListener?window.addEventListener("load",e):window.attachEvent?window.attachEvent("onload",e):void 0},i.actions=function(){return"iphone"===i.device||"ipad"===i.device?(i.helpers.touch(i.nodes.notMe,function(){return i.events.notMe()}),i.helpers.touch(i.nodes.me,function(){return i.events.me()})):(i.nodes.notMe.onclick=function(){return i.events.notMe()},i.nodes.me.onclick=function(){return i.events.me()})},i.events=Object(),i.events.me=function(){var e;return!i.states.animating&&1!==!i.data.slidesLeft()&&(i.data.slides[i.data.currentSlide]||i.events.loadingAnimation(),i.states.animating=!0,i.events.advanceSlide(),e=i.data.slides[i.data.currentSlide-1],i.data.addSlide(e.id,!0),i.data.currentSlide+=1,i.callbacks.me)?i.callbacks.me(i):void 0},i.events.notMe=function(){var e;return!i.states.animating&&i.nodes.nextSlide&&(i.data.slides[i.data.currentSlide]||i.events.loadingAnimation(),i.states.animating=!0,i.events.advanceSlide(),e=i.data.slides[i.data.currentSlide-1],i.data.addSlide(e.id,!1),i.data.currentSlide+=1,i.callbacks.notMe)?i.callbacks.notMe(i):void 0},i.events.advanceSlide=function(){var e;return i.prefetchSlides(),i.nodes.progressBarInner.style.width=i.data.getProgressBarNumbers()+"%",i.nodes.playedSlide&&i.nodes.slides.removeChild(i.nodes.playedSlide),i.nodes.playedSlide=i.nodes.currentSlide,i.nodes.currentSlide=i.nodes.nextSlide,i.nodes.currentSlide.addEventListener("webkitTransitionEnd",function(){return i.events.advancedSlide&&i.events.advancedSlide(),i.states.animating=!1},!1),i.nodes.currentSlide.addEventListener("transitionend",function(){return i.events.advancedSlide&&i.events.advancedSlide(),i.states.animating=!1},!1),i.nodes.currentSlide.addEventListener("oTransitionEnd",function(){return i.events.advancedSlide&&i.events.advancedSlide(),i.states.animating=!1},!1),i.nodes.currentSlide.addEventListener("otransitionend",function(){return i.events.advancedSlide&&i.events.advancedSlide(),i.states.animating=!1},!1),i.nodes.playedSlide.className+=" played",i.nodes.currentSlide.className+=" active",e=i.data.slides[i.data.currentSlide+1],e&&(i.nodes.nextSlide=i.partials.slide(e),i.nodes.slides.appendChild(i.nodes.nextSlide)),i.callbacks.advanceSlide?i.callbacks.advanceSlide(i):void 0},i.events.loadingAnimation=function(){return i.nodes.meNotMeContainer.className+=" hide",i.nodes.slides.removeChild(i.nodes.currentSlide),i.nodes.slides.insertBefore(i.partials.loadingAnimation(),i.nodes.slides.firstChild)},i.imageCache=Object(),i.prefetchSlides=function(){var e,t,n,s,a,d,r;for(n=i.data.currentSlide-1,e=i.data.currentSlide+9,d=i.data.slides.slice(n,e),r=[],s=0,a=d.length;a>s;s++)t=d[s],i.imageCache[t.image_desktop_retina]?r.push(void 0):(i.imageCache[t.image_desktop_retina]=new Image,r.push(i.imageCache[t.image_desktop_retina].src=t.image_desktop_retina));return r},i.events.setContainerSize=function(){var e;return e=i.nodes.main.scrollWidth,i.nodes.container.className=i.nodes.container.className.replace(" medium",""),i.nodes.container.className=i.nodes.container.className.replace(" large",""),i.nodes.container.className=i.nodes.container.className.replace(" small",""),480>e?i.nodes.container.className+=" small":768>e?i.nodes.container.className+=" medium":void 0},i.events.onRotate=function(e){var t,n;return n="onorientationchange"in window,t=n?"orientationchange":"resize",window.addEventListener(t,function(t){return e(t)},!1)},i.states.initialized=!1,i.initialize=function(){return Traitify.getSlides(e,function(s){var a,d;return i.data.currentSlide=1,i.data.totalSlideLength=s.length,i.data.sentSlides=0,i.data.slides=s.filter(function(e){return!e.completed_at}),i.data.slidesToPlayLength=i.data.slides.length,d=i.partials.make("link",{href:"https://s3.amazonaws.com/traitify-cdn/assets/stylesheets/slide_deck.css",type:"text/css",rel:"stylesheet"}),i.nodes.main.innerHTML="",i.nodes.main.appendChild(d),0!==i.data.slides.length?(i.nodes.container=i.partials.slideDeckContainer(),i.device&&(i.nodes.container.className+=" "+i.device,i.nodes.container.className+=" mobile phone",n&&n.nonTouch&&(i.nodes.container.className+=" non-touch")),n&&n.size&&(i.nodes.container.className+=" "+n.size),i.nodes.main.appendChild(i.nodes.container),i.actions(),i.prefetchSlides(),i.events.setContainerSize(),window.onresize=function(){return i.device?void 0:i.events.setContainerSize()},i.device&&i.device&&(a=function(){var e;return e=function(){return i.nodes.main.style.height=window.innerHeight+"px"},e(),i.events.onRotate(function(){return e()})},i.helpers.onload(function(){return a()}),a())):("string"!=typeof t&&(n.container=i.nodes.main),n&&n.showResults!==!1&&(i.results=Traitify.ui.resultsDefault(e,t,n)),i.callbacks.finished&&(i.states.finished=!0,i.callbacks.finished())),i.callbacks.initialize?i.callbacks.initialize(i):i.states.initialized=!0,i.data.currentSlideTime=(new Date).getTime()})},i.callbacks=Object(),i.onInitialize=function(e){return i.states.initialized===!0&&e(),i.callbacks.initialize=e,i},i.onFinished=function(e){return i.states.finished===!0&&e(),i.callbacks.finished=e,i},i.onAddSlide=function(e){return i.callbacks.addSlide=e,i},i.onMe=function(e){return i.callbacks.me=e,i},i.onNotMe=function(e){return i.callbacks.notMe=e,i},i.onAdvanceSlide=function(e){return i.callbacks.advanceSlide=e,i},i.initialize(),i):(console.log("YOU MUST HAVE A TAG WITH A SELECTOR FOR THIS TO WORK"),!1)},Traitify.ui.resultsDefault=function(){var e;return console.log("here"),e=Object()};