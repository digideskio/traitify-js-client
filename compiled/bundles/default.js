this.Traitify=new function(){return this.host="https://api.traitify.com",this.version="v1",this.testMode=!1,this.setTestMode=function(e){return this.testMode=e,this},this.setHost=function(e){return e=e.replace("http://","").replace("https://",""),e="https://"+e,this.host=e,this},this.setPublicKey=function(e){return this.publicKey=e,this},this.setVersion=function(e){return this.version=e,this},this.ajax=function(e,t,n,i){var a;return e=""+this.host+"/"+this.version+e,a=new XMLHttpRequest,"withCredentials"in a?a.open(t,e,!0):"undefined"!=typeof XDomainRequest?(a=new XDomainRequest,a.open(t,e)):(console.log("There was an error making the request."),a=null),a.open(t,e,!0),a.setRequestHeader("Authorization","Basic "+btoa(this.publicKey+":x")),a.setRequestHeader("Content-type","application/json"),a.setRequestHeader("Accept","application/json"),a.onload=function(){var e;return e=JSON.parse(a.response),n(e),!1},a.send(i),this},this.put=function(e,t,n){return this.ajax(e,"PUT",n,t),this},this.get=function(e,t){return this.ajax(e,"GET",t,""),this},this.getDecks=function(e){return this.get("/decks",function(t){return e(t)}),this},this.getSlides=function(e,t){return this.get("/assessments/"+e+"/slides",function(e){return t(e)}),this},this.addSlide=function(e,t,n,i,a){return this.put("/assessments/"+e+"/slides/"+t,JSON.stringify({response:n,time_taken:i}),function(e){return a(e)}),this},this.addSlides=function(e,t,n){return this.put("/assessments/"+e+"/slides",JSON.stringify(t),function(e){return n(e)}),this},this.getPersonalityTypes=function(e,t){return this.get("/assessments/"+e+"/personality_types",function(e){return t(e)}),this},this.getPersonalityTraits=function(e,t){return this.get("/assessments/"+e+"/personality_traits",function(e){return t(e)}),this},this.getPersonalityTypesTraits=function(e,t,n){return this.get("/assessments/"+e+"/personality_types/"+t+"/personality_traits",function(e){return n(e)}),this},this.ui=Object(),this},Traitify.ui.slideDeck=function(e,t,n){var i,a,s;return i=Object(),i.nodes=Object(),i.states=Object(),i.states.animating=!1,i.data=Object(),i.data.slideResponses=Object(),i.states.finished=!1,"undefined"==typeof n&&(n=Object()),navigator.userAgent.match(/iPad/i)&&(i.device="ipad"),navigator.userAgent.match(/iPhone/i)&&(i.device="iphone"),navigator.userAgent.match(/Android/i)&&(i.device="android"),navigator.userAgent.match(/BlackBerry/i)&&(i.device="blackberry"),navigator.userAgent.match(/webOS/i)&&(i.device="webos"),"string"!=typeof t?(i.nodes.main=document.createElement("div"),document.getElementsByTagName("body")[0].appendChild(i.nodes.main)):-1!==t.indexOf("#")?(t=t.replace("#",""),i.nodes.main=document.getElementById(t)):(t=t.replace(".",""),a=document.getElementsByClassName(t),i.nodes.main=a?a[0]:null),i.nodes.main?(i.classes=function(){var e,t;e=i.main.className.split(" ");for(t in e)e[t]="."+e[t];return e.join("")},i.data.slidesLeft=function(){return i.data.slides.length-i.data.currentSlide},i.data.slideValues=Array(),i.data.addSlide=function(a,s){return i.data.lastSlideTime=i.data.currentSlideTime,i.data.currentSlideTime=(new Date).getTime(),i.data.slideValues.push({id:a,response:s,time_taken:i.data.currentSlideTime-i.data.lastSlideTime}),i.data.sentSlides+=1,i.data.slideValues.length%10===0||i.data.sentSlides===i.data.slidesToPlayLength?Traitify.addSlides(e,i.data.slideValues,function(){return i.callbacks.addSlide&&i.callbacks.addSlide(i),i.data.sentSlides===i.data.slidesToPlayLength&&(i.nodes.main.innerHTML="",n.showResults!==!1&&Traitify.ui.resultsDefault(e,t,n),i.callbacks.finished)?i.callbacks.finished(i):void 0}):void 0},i.partials=Object(),i.partials.make=function(e,t){var n,i;i=document.createElement(e);for(n in t)i.setAttribute(n,t[n]);return i},i.partials.div=function(e){return this.make("div",e)},i.partials.img=function(e){return this.make("img",e)},i.partials.i=function(e){return this.make("i",e)},i.data.getProgressBarNumbers=function(e){var t,n,a,s;return a=i.data.totalSlideLength,t=i.data.slides.length,n=i.data.sentSlides,"initializing"!==e&&(n+=1),s=a-t+n,s/i.data.totalSlideLength*100},i.partials.slideDeckContainer=function(){var e,t,n;return t=this.div({"class":"tf-slide-deck-container"}),e=this.div({"class":"cover"}),e.innerHTML="Landscape mode is not currently supported",t.appendChild(e),n=i.data.getProgressBarNumbers("initializing"),t.appendChild(i.partials.progressBar(n)),t.appendChild(this.slides(i.data.slides)),t.appendChild(this.meNotMe()),t},i.partials.meNotMe=function(){var e;return e=this.div({"class":"me-not-me-container"}),i.nodes.me=this.div({"class":"me"}),i.nodes.notMe=this.div({"class":"not-me"}),i.nodes.notMe.innerHTML="Not Me",i.nodes.me.innerHTML="Me",e.appendChild(i.nodes.me),e.appendChild(i.nodes.notMe),i.nodes.meNotMeContainer=e,e},i.partials.slides=function(e){var t,n;return n=this.div({"class":"slides"}),t=i.partials.slide(e[0]),t.className+=" placeholder",n.appendChild(t),i.nodes.currentSlide=i.partials.slide(e[0]),i.nodes.currentSlide.className+=" active",n.appendChild(i.nodes.currentSlide),e[1]?(i.nodes.nextSlide=i.partials.slide(e[1]),n.appendChild(i.nodes.nextSlide)):i.nodes.nextSlide=!1,i.nodes.slides=n,n},i.partials.slide=function(e){var t,n,a;return t=this.div({"class":"slide"}),n=this.div({"class":"caption"}),n.innerHTML=e.caption,i.device?(a=this.div({style:"background-image:url('"+e.image_desktop_retina+"'); background-position:"+e.focus_x+"% "+e.focus_y+"%;'","class":"image"}),a.appendChild(n)):(a=this.img({src:e.image_desktop_retina}),t.appendChild(n)),t.appendChild(a),t},i.partials.progressBar=function(e){var t,n;return t=this.div({"class":"progress-bar"}),n=this.div({"class":"progress-bar-inner"}),n.style.width=e+"%",t.appendChild(n),i.nodes.progressBar=t,i.nodes.progressBarInner=n,t},i.partials.loadingAnimation=function(){var e,t,n,i;return t=this.div({"class":"loading"}),e=this.i(Object()),i=this.i(Object()),n=this.div({"class":"symbol"}),n.appendChild(e),n.appendChild(i),t.appendChild(n),t},i.helpers=Object(),s=Object(),i.helpers.touch=function(e,t){return e.addEventListener("touchstart",function(e){var t;return t=e.changedTouches[0],s.startx=parseInt(t.clientX),s.starty=parseInt(t.clientY)}),e.addEventListener("touchend",function(e){var n,i,a;return a=e.changedTouches[0],n=Math.abs(s.startx-parseInt(a.clientX)),i=Math.abs(s.starty-parseInt(a.clientY)),2>n&&2>n?t():void 0})},i.helpers.onload=function(e){return window.addEventListener?window.addEventListener("load",e):window.attachEvent?window.attachEvent("onload",e):void 0},i.actions=function(){return"iphone"===i.device||"ipad"===i.device?(i.helpers.touch(i.nodes.notMe,function(){return i.events.notMe()}),i.helpers.touch(i.nodes.me,function(){return i.events.me()})):(i.nodes.notMe.onclick=function(){return i.events.notMe()},i.nodes.me.onclick=function(){return i.events.me()})},i.events=Object(),i.events.me=function(){var e;return!i.states.animating&&1!==!i.data.slidesLeft()&&(i.data.slides[i.data.currentSlide]||i.events.loadingAnimation(),i.states.animating=!0,i.events.advanceSlide(),e=i.data.slides[i.data.currentSlide-1],i.data.addSlide(e.id,!0),i.data.currentSlide+=1,i.callbacks.me)?i.callbacks.me(i):void 0},i.events.notMe=function(){var e;return!i.states.animating&&i.nodes.nextSlide&&(i.data.slides[i.data.currentSlide]||i.events.loadingAnimation(),i.states.animating=!0,i.events.advanceSlide(),e=i.data.slides[i.data.currentSlide-1],i.data.addSlide(e.id,!1),i.data.currentSlide+=1,i.callbacks.notMe)?i.callbacks.notMe(i):void 0},i.events.advanceSlide=function(){var e;return i.prefetchSlides(),i.nodes.progressBarInner.style.width=i.data.getProgressBarNumbers()+"%",i.nodes.playedSlide&&i.nodes.slides.removeChild(i.nodes.playedSlide),i.nodes.playedSlide=i.nodes.currentSlide,i.nodes.currentSlide=i.nodes.nextSlide,i.nodes.currentSlide.addEventListener("webkitTransitionEnd",function(){return i.events.advancedSlide&&i.events.advancedSlide(),i.states.animating=!1},!1),i.nodes.currentSlide.addEventListener("transitionend",function(){return i.events.advancedSlide&&i.events.advancedSlide(),i.states.animating=!1},!1),i.nodes.currentSlide.addEventListener("oTransitionEnd",function(){return i.events.advancedSlide&&i.events.advancedSlide(),i.states.animating=!1},!1),i.nodes.currentSlide.addEventListener("otransitionend",function(){return i.events.advancedSlide&&i.events.advancedSlide(),i.states.animating=!1},!1),i.nodes.playedSlide.className+=" played",i.nodes.currentSlide.className+=" active",e=i.data.slides[i.data.currentSlide+1],e&&(i.nodes.nextSlide=i.partials.slide(e),i.nodes.slides.appendChild(i.nodes.nextSlide)),i.callbacks.advanceSlide?i.callbacks.advanceSlide(i):void 0},i.events.loadingAnimation=function(){return i.nodes.meNotMeContainer.className+=" hide",i.nodes.slides.removeChild(i.nodes.currentSlide),i.nodes.slides.insertBefore(i.partials.loadingAnimation(),i.nodes.slides.firstChild)},i.imageCache=Object(),i.prefetchSlides=function(){var e,t,n,a,s,r,d;for(n=i.data.currentSlide-1,e=i.data.currentSlide+9,r=i.data.slides.slice(n,e),d=[],a=0,s=r.length;s>a;a++)t=r[a],i.imageCache[t.image_desktop_retina]?d.push(void 0):(i.imageCache[t.image_desktop_retina]=new Image,d.push(i.imageCache[t.image_desktop_retina].src=t.image_desktop_retina));return d},i.events.setContainerSize=function(){var e;return e=i.nodes.main.scrollWidth,i.nodes.container.className=i.nodes.container.className.replace(" medium",""),i.nodes.container.className=i.nodes.container.className.replace(" large",""),i.nodes.container.className=i.nodes.container.className.replace(" small",""),480>e?i.nodes.container.className+=" small":768>e?i.nodes.container.className+=" medium":void 0},i.events.onRotate=function(e){var t,n;return n="onorientationchange"in window,t=n?"orientationchange":"resize",window.addEventListener(t,function(t){return e(t)},!1)},i.states.initialized=!1,i.initialize=function(){return Traitify.getSlides(e,function(a){var s,r;return i.data.currentSlide=1,i.data.totalSlideLength=a.length,i.data.sentSlides=0,i.data.slides=a.filter(function(e){return!e.completed_at}),i.data.slidesToPlayLength=i.data.slides.length,r=i.partials.make("link",{href:"https://s3.amazonaws.com/traitify-cdn/assets/stylesheets/slide_deck.css",type:"text/css",rel:"stylesheet"}),i.nodes.main.innerHTML="",i.nodes.main.appendChild(r),0!==i.data.slides.length?(i.nodes.container=i.partials.slideDeckContainer(),i.device&&(i.nodes.container.className+=" "+i.device,i.nodes.container.className+=" mobile phone",n&&n.nonTouch&&(i.nodes.container.className+=" non-touch")),n&&n.size&&(i.nodes.container.className+=" "+n.size),i.nodes.main.appendChild(i.nodes.container),i.actions(),i.prefetchSlides(),i.events.setContainerSize(),window.onresize=function(){return i.device?void 0:i.events.setContainerSize()},i.device&&i.device&&(s=function(){var e;return e=function(){return i.nodes.main.style.height=window.innerHeight+"px"},e(),i.events.onRotate(function(){return e()})},i.helpers.onload(function(){return s()}),s())):("string"!=typeof t&&(n.container=i.nodes.main),n&&n.showResults!==!1&&(i.results=Traitify.ui.resultsDefault(e,t,n)),i.callbacks.finished&&(i.states.finished=!0,i.callbacks.finished())),i.callbacks.initialize?i.callbacks.initialize(i):i.states.initialized=!0,i.data.currentSlideTime=(new Date).getTime()})},i.callbacks=Object(),i.onInitialize=function(e){return i.states.initialized===!0&&e(),i.callbacks.initialize=e,i},i.onFinished=function(e){return i.states.finished===!0&&e(),i.callbacks.finished=e,i},i.onAddSlide=function(e){return i.callbacks.addSlide=e,i},i.onMe=function(e){return i.callbacks.me=e,i},i.onNotMe=function(e){return i.callbacks.notMe=e,i},i.onAdvanceSlide=function(e){return i.callbacks.advanceSlide=e,i},i.initialize(),i):(console.log("YOU MUST HAVE A TAG WITH A SELECTOR FOR THIS TO WORK"),!1)},Traitify.ui.resultsDefault=function(e,t,n){var i,a;return i=Object(),i.nodes=Object(),i.states=Object(),i.data=Object(),"string"!=typeof t?i.nodes.main=n.container:-1!==t.indexOf("#")?(t=t.replace("#",""),i.nodes.main=document.getElementById(t)):(t=t.replace(".",""),a=document.getElementsByClassName(t),i.nodes.main=a?a[0]:null),i.nodes.main?(i.classes=function(){var e,t;e=i.main.className.split(" ");for(t in e)e[t]="."+e[t];return e.join("")},i.partials=Object(),i.partials.make=function(e,t){var n,i;i=document.createElement(e);for(n in t)i.setAttribute(n,t[n]);return i},i.partials.div=function(e){return this.make("div",e)},i.partials.img=function(e){return this.make("img",e)},i.partials.i=function(e){return this.make("i",e)},i.nodes.personalityTypes=Array(),i.partials.personalityType=function(e){var t,n,a,s,r,d,o;return d=this.div({"class":"personality-type"}),t=i.partials.badge(e.personality_type.badge),e.score<0?(n=i.partials.barLeft(Math.abs(e.score)),a=i.partials.barRight(0)):(n=i.partials.barLeft(0),a=i.partials.barRight(Math.abs(e.score))),s=this.div({"class":"name"}),s.innerHTML=e.personality_type.name,o=this.div({"class":"score"}),o.innerHTML=e.score<0?"("+Math.round(Math.abs(e.score))+")":Math.round(e.score),r=this.div({"class":"name-and-score"}),r.appendChild(s),r.appendChild(o),d.appendChild(r),d.appendChild(n),d.appendChild(t),d.appendChild(a),i.nodes.personalityTypes.push({personalityType:d,badge:t}),d},i.partials.badge=function(e){var t;return t=this.div({"class":"badge"}),t.appendChild(this.img({src:e.image_large})),t},i.partials.barLeft=function(e){var t,n,a;return a=i.nodes.personalityTypes.length-1,n=this.div({"class":"bar-inner-left"}),n.style.width=e+"%",t=this.div({"class":"bar-left"}),t.appendChild(n),t},i.partials.barRight=function(e){var t,n,a;return a=i.nodes.personalityTypes.length-1,n=this.div({"class":"bar-inner-right"}),n.style.width=e+"%",t=this.div({"class":"bar-right"}),t.appendChild(n),t},i.partials.toggleTraits=function(){var e;return e=this.div({"class":"toggle-traits"}),e.innerHTML="Show / Hide Traits",i.nodes.toggleTraits=e,e},i.nodes.personalityTraits=Array(),i.partials.personalityTrait=function(e){var t,n,a,s;return n=this.div({"class":"personality-trait"}),t=this.div({"class":"left-name"}),t.innerHTML=e.left_personality_trait.name,a=this.div({"class":"right-name"}),a.innerHTML=e.right_personality_trait.name,n.appendChild(t),n.appendChild(a),s=i.partials.traitScorePosition(e.score),n.appendChild(s),i.nodes.personalityTraits.push({personalityTrait:n,leftName:t,rightName:a,score:s}),n},i.partials.traitScorePosition=function(e){var t,n,i,a;return i=this.div({"class":"score-container"}),a=this.div({"class":"score-wrapper"}),i.appendChild(a),n=this.div({"class":"score"}),n.style.left=e+"%",a.appendChild(n),t=this.div({"class":"line"}),i.appendChild(t),i},i.partials.printButton=function(){var e;return e=this.div({"class":"print-button"}),i.nodes.printButton=e,e.innerHTML="Print",e},i.actions=function(){return i.nodes.toggleTraits&&(i.nodes.toggleTraits.onclick=function(){return i.nodes.personalityTraitContainer?"block"===i.nodes.personalityTypesContainer.style.display?(i.nodes.personalityTypesContainer.style.display="none",i.nodes.personalityTraitContainer.style.display="block"):(i.nodes.personalityTypesContainer.style.display="block",i.nodes.personalityTraitContainer.style.display="none"):Traitify.getPersonalityTraits(e,function(e){var t,n,a,s;for(n=i.partials.div({"class":"personality-traits"}),i.nodes.personalityTraitContainer=n,a=0,s=e.length;s>a;a++)t=e[a],n.appendChild(i.partials.personalityTrait(t));return i.nodes.container.appendChild(n),i.nodes.personalityTypesContainer.style.display="none",i.nodes.personalityTraitContainer.style.display="block"})}),i.nodes.printButton.onclick=function(){var e;return i.printWindow=window.open(),i.nodes.printWindow=Object(),i.nodes.printWindow.head=i.printWindow.document.getElementsByTagName("head")[0],i.nodes.printWindow.main=i.printWindow.document.getElementsByTagName("body")[0],i.nodes.printContainer=i.partials.div({"class":"tf-results-prop"}),i.nodes.printContainer.appendChild(i.nodes.stylesheet.cloneNode(!0)),i.nodes.printContainer.appendChild(i.nodes.personalityTypesContainer.cloneNode(!0)),i.nodes.personalityTraitContainer&&i.nodes.printContainer.appendChild(i.nodes.personalityTraitContainer.cloneNode(!0)),i.nodes.printWindow.main.appendChild(i.nodes.printContainer),e=i.partials.make("title"),e.innerHTML="PERSONALITY TO PRINT",i.nodes.printWindow.head.appendChild(e)}},i.states.initialized=!1,i.initialize=function(){return i.nodes.main.innerHTML="",Traitify.getPersonalityTypes(e,function(e){var t,a,s,r,d,o;for(i.data.personalityTypes=e.personality_types,a=i.partials.make("link",{href:"https://s3.amazonaws.com/traitify-cdn/assets/stylesheets/results_prop.css",type:"text/css",rel:"stylesheet"}),i.nodes.stylesheet=a,i.nodes.main.appendChild(a),i.nodes.container=i.partials.div({"class":"tf-results-prop"}),s=i.partials.div({"class":"tools"}),i.nodes.toolsContainer=s,s.appendChild(i.partials.printButton()),n&&n.traits&&s.appendChild(i.partials.toggleTraits()),i.nodes.container.appendChild(s),i.nodes.personalityTypesContainer=i.partials.div({"class":"personality-types"}),i.nodes.container.appendChild(i.nodes.personalityTypesContainer),o=i.data.personalityTypes,r=0,d=o.length;d>r;r++)t=o[r],i.nodes.personalityTypesContainer.appendChild(i.partials.personalityType(t));return i.nodes.main.appendChild(i.nodes.container),i.actions(),i.callbacks.initialize?i.callbacks.initialize(i):i.states.initialized=!0})},i.callbacks=Object(),i.onInitialize=function(e){return i.states.initialized===!0?e():i.callbacks.initialize=e,i},i.initialize(),i):(console.log("YOU MUST HAVE A TAG WITH A SELECTOR FOR THIS TO WORK"),!1)};