this.Traitify=new function(){var e;return e=function(e){var t;return t=Object(),t.then=function(e){return t.resolved?e(t.data):t.thenCallback=e,t},t.resolved=!1,t.resolve=function(e){return t.data=e,t.thenCallback?t.thenCallback(e):t.resolved=!0,t},t["catch"]=function(e){return t.rejected?e(t.error):t.rejectCallback=e,t},t.rejected=!1,t.reject=function(e){return t.error=e,t.rejectCallback?t.rejectCallback(data):t.rejected=!0,t},e(t.resolve,t.reject),t},this.host="https://api.traitify.com",this.version="v1",this.testMode=!1,this.setTestMode=function(e){return this.testMode=e,this},this.setHost=function(e){return e=e.replace("http://","").replace("https://",""),e="https://"+e,this.host=e,this},this.setPublicKey=function(e){return this.publicKey=e,this},this.setVersion=function(e){return this.version=e,this},this.ajax=function(e,t,n,i){var a;return e=""+this.host+"/"+this.version+e,a=new XMLHttpRequest,"withCredentials"in a?a.open(t,e,!0):"undefined"!=typeof XDomainRequest?(a=new XDomainRequest,a.open(t,e)):(console.log("There was an error making the request."),a=null),a.open(t,e,!0),a.setRequestHeader("Authorization","Basic "+btoa(this.publicKey+":x")),a.setRequestHeader("Content-type","application/json"),a.setRequestHeader("Accept","application/json"),a.onload=function(){var e;return e=JSON.parse(a.response),n(e),!1},a.send(i),this},this.put=function(e,t,n){return this.ajax(e,"PUT",n,t),this},this.get=function(e,t){return this.ajax(e,"GET",t,""),this},this.getDecks=function(t){var n;return n=new e(function(e,n){var i;try{return Traitify.get("/decks",function(n){return t&&t(n),e?e(n):void 0})}catch(a){if(i=a,n)return n(i)}})},this.getSlides=function(t,n){var i;return i=new e(function(e,i){var a;try{return Traitify.get("/assessments/"+t+"/slides",function(t){return n&&n(t),e?e(t):void 0})}catch(s){if(a=s,i)return i(a)}})},this.addSlide=function(t,n,i,a,s){var d;return d=new e(function(e,d){var r;try{return Traitify.put("/assessments/"+t+"/slides/"+n,JSON.stringify({response:i,time_taken:a}),function(t){return s&&s(t),e?e(t):void 0})}catch(l){if(r=l,d)return d(r)}})},this.addSlides=function(t,n,i){var a;return a=new e(function(e,a){var s;try{return Traitify.put("/assessments/"+t+"/slides",JSON.stringify(n),function(t){return i&&i(t),e?e(t):void 0})}catch(d){if(s=d,a)return a(s)}})},this.getPersonalityTypes=function(t,n,i){var a;return a=new e(function(e,a){var s,d,r,l,o,c;try{for(null==n&&(n=Object()),r=Array(),c=Object.keys(n),l=0,o=c.length;o>l;l++)d=c[l],r.push(""+d+"="+n[d]);return Traitify.get("/assessments/"+t+"/personality_types?"+r.join("&"),function(t){return i&&i(t),e?e(t):void 0})}catch(u){if(s=u,a)return a(s)}})},this.getPersonalityTraits=function(t,n,i){var a;return a=new e(function(e,n){var a;try{return Traitify.get("/assessments/"+t+"/personality_traits",function(t){return i&&i(t),e?e(t):void 0})}catch(s){if(a=s,n)return n(a)}})},this.getPersonalityTypesTraits=function(t,n,i){var a;return a=new e(function(e,a){var s;try{return Traitify.get("/assessments/"+t+"/personality_types/"+n+"/personality_traits",function(t){return i&&i(t),e?e(t):void 0})}catch(d){if(s=d,a)return a(s)}})},this.ui=Object(),this},Traitify.ui.slideDeck=function(e,t){var n;return e.data.slideResponses=Object(),e.states.add("animating"),e.states.add("finished"),e.states.add("initialized"),e.callbacks.add("Initialize"),e.callbacks.add("Finished"),e.callbacks.add("AddSlide"),e.callbacks.add("Me"),e.callbacks.add("NotMe"),e.callbacks.add("AdvanceSlide"),e.callbacks.add("finished"),e.data.slidesLeft=function(){return e.data.slides.all.length-e.data.currentSlide},e.data.slideValues=Array(),e.data.addSlide=function(n,i){return e.data.lastSlideTime=e.data.currentSlideTime,e.data.currentSlideTime=(new Date).getTime(),e.data.slideValues.push({id:n,response:i,time_taken:e.data.currentSlideTime-e.data.lastSlideTime}),e.data.sentSlides+=1,e.data.slideValues.length%10===0||e.data.sentSlides===e.data.slidesToPlayLength?Traitify.addSlides(e.data.assessmentId,e.data.slideValues,function(){return e.callbacks.addSlide&&e.callbacks.addSlide(e),e.data.sentSlides===e.data.slidesToPlayLength&&(e.nodes.main.innerHTML="",t.showResults!==!1&&(e.nodes.main.innerHTML=Traitify.ui.styles,Traitify.ui.loadResults(e.data.assessmentId,e.data.selector,t.results)),e.callbacks.finished)?e.callbacks.finished(e):void 0}):void 0},e.data.getProgressBarNumbers=function(t){var n,i,a,s;return a=e.data.totalSlideLength,n=e.data.slides.all.length,i=e.data.sentSlides,"initializing"!==t&&(i+=1),s=a-n+i,s/e.data.totalSlideLength*100},e.partials.slideDeckContainer=function(){var t,n,i;return n=this.div({"class":"tf-slide-deck-container"}),t=this.div({"class":"cover"}),t.innerHTML="Landscape mode is not currently supported",n.appendChild(t),i=e.data.getProgressBarNumbers("initializing"),n.appendChild(e.partials.progressBar(i)),n.appendChild(this.slides(e.data.slides.all)),n.appendChild(this.meNotMe()),n},e.partials.meNotMe=function(){var t;return t=this.div({"class":"me-not-me-container"}),e.nodes.me=this.div({"class":"me"}),e.nodes.notMe=this.div({"class":"not-me"}),e.nodes.notMe.innerHTML="Not Me",e.nodes.me.innerHTML="Me",t.appendChild(e.nodes.me),t.appendChild(e.nodes.notMe),e.nodes.meNotMeContainer=t,t},e.partials.slides=function(t){var n,i;return i=this.div({"class":"slides"}),n=e.partials.slide(t[0]),n.className+=" placeholder",i.appendChild(n),e.nodes.currentSlide=e.partials.slide(t[0]),e.nodes.currentSlide.className+=" active",i.appendChild(e.nodes.currentSlide),t[1]?(e.nodes.nextSlide=e.partials.slide(t[1]),i.appendChild(e.nodes.nextSlide)):e.nodes.nextSlide=!1,e.nodes.slides=i,i},e.partials.slide=function(t){var n,i,a;return n=this.div({"class":"slide"}),i=this.div({"class":"caption"}),i.innerHTML=t.caption,e.device?(a=this.div({style:"background-image:url('"+t.image_desktop_retina+"'); background-position:"+t.focus_x+"% "+t.focus_y+"%;'","class":"image"}),a.appendChild(i)):(a=this.img({src:t.image_desktop_retina}),n.appendChild(i)),n.appendChild(a),n},e.partials.progressBar=function(t){var n,i;return n=this.div({"class":"progress-bar"}),i=this.div({"class":"progress-bar-inner"}),i.style.width=t+"%",n.appendChild(i),e.nodes.progressBar=n,e.nodes.progressBarInner=i,n},e.partials.loadingAnimation=function(){var e,t,n,i;return t=this.div({"class":"loading"}),e=this.i(Object()),i=this.i(Object()),n=this.div({"class":"symbol"}),n.appendChild(e),n.appendChild(i),t.appendChild(n),t},n=Object(),e.helpers.touch=function(e,t){return e.addEventListener("touchstart",function(e){var t;return t=e.changedTouches[0],n.startx=parseInt(t.clientX),n.starty=parseInt(t.clientY)}),e.addEventListener("touchend",function(e){var i,a,s;return s=e.changedTouches[0],i=Math.abs(n.startx-parseInt(s.clientX)),a=Math.abs(n.starty-parseInt(s.clientY)),2>i&&2>i?t():void 0})},e.helpers.onload=function(e){return window.addEventListener?window.addEventListener("load",e):window.attachEvent?window.attachEvent("onload",e):void 0},e.events.me=function(){var t;return!e.states.animating()&&1!==!e.data.slidesLeft()&&(e.data.slides.all[e.data.currentSlide]||e.events.loadingAnimation(),e.states.animating(!0),e.events.advanceSlide(),t=e.data.slides.all[e.data.currentSlide-1],e.data.addSlide(t.id,!0),e.data.currentSlide+=1,e.callbacks.me)?e.callbacks.me(e):void 0},e.events.notMe=function(){var t;return!e.states.animating()&&e.nodes.nextSlide&&(e.data.slides.all[e.data.currentSlide]||e.events.loadingAnimation(),e.states.animating(!0),e.events.advanceSlide(),t=e.data.slides.all[e.data.currentSlide-1],e.data.addSlide(t.id,!1),e.data.currentSlide+=1,e.callbacks.notMe)?e.callbacks.notMe(e):void 0},e.events.advanceSlide=function(){var t;return e.prefetchSlides(),e.nodes.progressBarInner.style.width=e.data.getProgressBarNumbers()+"%",e.nodes.playedSlide&&e.nodes.slides.removeChild(e.nodes.playedSlide),e.nodes.playedSlide=e.nodes.currentSlide,e.nodes.currentSlide=e.nodes.nextSlide,e.nodes.currentSlide.addEventListener("webkitTransitionEnd",function(){return e.events.advancedSlide&&e.events.advancedSlide(),e.states.animating(!1)},!1),e.nodes.currentSlide.addEventListener("transitionend",function(){return e.events.advancedSlide&&e.events.advancedSlide(),e.states.animating(!1)},!1),e.nodes.currentSlide.addEventListener("oTransitionEnd",function(){return e.events.advancedSlide&&e.events.advancedSlide(),e.states.animating(!1)},!1),e.nodes.currentSlide.addEventListener("otransitionend",function(){return e.events.advancedSlide&&e.events.advancedSlide(),e.states.animating(!1)},!1),e.nodes.playedSlide.className+=" played",e.nodes.currentSlide.className+=" active",t=e.data.slides.all[e.data.currentSlide+1],t&&(e.nodes.nextSlide=e.partials.slide(t),e.nodes.slides.appendChild(e.nodes.nextSlide)),e.callbacks.advanceSlide?e.callbacks.advanceSlide(e):void 0},e.events.loadingAnimation=function(){return e.nodes.meNotMeContainer.className+=" hide",e.nodes.slides.removeChild(e.nodes.currentSlide),e.nodes.slides.insertBefore(e.partials.loadingAnimation(),e.nodes.slides.firstChild)},e.imageCache=Object(),e.prefetchSlides=function(){var t,n,i,a,s,d,r;for(i=e.data.currentSlide-1,t=e.data.currentSlide+9,d=e.data.slides.all.slice(i,t),r=[],a=0,s=d.length;s>a;a++)n=d[a],e.imageCache[n.image_desktop_retina]?r.push(void 0):(e.imageCache[n.image_desktop_retina]=new Image,r.push(e.imageCache[n.image_desktop_retina].src=n.image_desktop_retina));return r},e.events.setContainerSize=function(){var t;return t=e.nodes.main.scrollWidth,e.nodes.container.className=e.nodes.container.className.replace(" medium",""),e.nodes.container.className=e.nodes.container.className.replace(" large",""),e.nodes.container.className=e.nodes.container.className.replace(" small",""),480>t?e.nodes.container.className+=" small":768>t?e.nodes.container.className+=" medium":void 0},e.events.onRotate=function(e){var t,n;return n="onorientationchange"in window,t=n?"orientationchange":"resize",window.addEventListener(t,function(t){return e(t)},!1)},e.initialization.events.add("Setup Data",function(){return e.data.currentSlide=1,e.data.slides.all=e.data.slides.notCompleted.concat(e.data.slides.completed),e.data.sentSlides=0,e.data.totalSlideLength=e.data.totalSlideLength,e.data.slidesToPlayLength=e.data.slides.all.length}),e.initialization.events.add("Handle device type",function(){return e.nodes.container=e.partials.slideDeckContainer(),e.device&&(e.nodes.container.className+=" "+e.device,e.nodes.container.className+=" mobile phone",t&&t.nonTouch&&(e.nodes.container.className+=" non-touch")),t&&t.size&&(e.nodes.container.className+=" "+t.size),e.nodes.main.appendChild(e.nodes.container)}),e.initialization.events.add("Actions",function(){return"iphone"===e.device||"ipad"===e.device?(e.helpers.touch(e.nodes.notMe,function(){return e.events.notMe()}),e.helpers.touch(e.nodes.me,function(){return e.events.me()})):(e.nodes.notMe.onclick=function(){return e.events.notMe()},e.nodes.me.onclick=function(){return e.events.me()})}),e.initialization.events.add("Prefetch Slides",function(){return e.prefetchSlides()}),e.initialization.events.add("Setup Screen",function(){var t;return e.events.setContainerSize(),window.onresize=function(){return e.device?void 0:e.events.setContainerSize()},e.device&&e.device?(t=function(){var t;return(t=function(){return e.nodes.main.style.height=window.innerHeight+"px"})()},e.events.onRotate(function(){return windowOrienter()}),e.helpers.onload(function(){return t()}),t()):void 0}),e.initialization.events.add("initializated",function(){return e.states.initialized(!0),e.data.currentSlideTime=(new Date).getTime()}),e};